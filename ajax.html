<!DOCTYPE html>
<html lang="zh-C-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>JavaScript AJAX 教程</title>
    <link rel="stylesheet" href="../../assets/css/styles.css">
</head>
<body>
    <header>
        <h1>JavaScript AJAX 教程</h1>
        <nav>
            <ul>
                <li><a href="../html/index.html">HTML 教程</a></li>
                <li><a href="../css/index.html">CSS 教程</a></li>
                <li><a href="index.html">JavaScript 教程</a></li>
            </ul>
        </nav>
    </header>

    <main>
        <section>
            <h2>1. 什么是 AJAX?</h2>
            <p>AJAX（Asynchronous JavaScript and XML）是一种用于在网页中异步加载数据的技术，允许在不重新加载整个页面的情况下与服务器进行交互。</p>
        </section>

        <section>
            <h2>2. AJAX 的工作原理</h2>
            <p>AJAX 的工作流程如下：</p>
            <ol>
                <li>创建 XMLHttpRequest 对象。</li>
                <li>配置请求（请求方法、URL、是否异步）。</li>
                <li>发送请求。</li>
                <li>处理响应（根据 HTTP 状态码判断是否成功）。</li>
            </ol>
        </section>

        <section>
            <h2>3. 使用 XMLHttpRequest 发送 AJAX 请求</h2>
            <p>下面是使用 XMLHttpRequest 发送 AJAX 请求的示例：</p>
            <pre><code>const xhr = new XMLHttpRequest();
xhr.open("GET", "https://jsonplaceholder.typicode.com/posts", true);

xhr.onload = function() {
    if (xhr.status >= 200 && xhr.status < 300) {
        const response = JSON.parse(xhr.responseText);
        console.log(response);
    } else {
        console.error("请求失败:", xhr.statusText);
    }
};

xhr.onerror = function() {
    console.error("网络错误");
};

xhr.send();</code></pre>
        </section>

        <section>
            <h2>4. 使用 Fetch API 发送 AJAX 请求</h2>
            <p>Fetch API 是一种现代的异步请求方法，使用起来更加简洁：</p>
            <pre><code>fetch("https://jsonplaceholder.typicode.com/posts")
    .then(response => {
        if (!response.ok) {
            throw new Error("网络响应错误");
        }
        return response.json();
    })
    .then(data => console.log(data))
    .catch(error => console.error("请求失败:", error));</code></pre>
        </section>

        <section>
            <h2>5. AJAX 示例：从 API 获取数据并显示</h2>
            <p>以下是一个简单示例，展示如何使用 AJAX 从 API 获取数据并显示在网页上：</p>
            <pre><code>const button = document.getElementById("fetchButton");
const output = document.getElementById("output");

button.addEventListener("click", () => {
    fetch("https://jsonplaceholder.typicode.com/posts")
        .then(response => response.json())
        .then(data => {
            output.innerHTML = "";
            data.forEach(post => {
                const div = document.createElement("div");
                div.innerHTML = `<h3>${post.title}</h3><p>${post.body}</p>`;
                output.appendChild(div);
            });
        })
        .catch(error => console.error("请求失败:", error));
});</code></pre>
        </section>

        <section>
            <h2>6. 扩展阅读</h2>
            <ul>
                <li><a href="https://developer.mozilla.org/zh-CN/docs/Web/API/XMLHttpRequest">MDN XMLHttpRequest</a></li>
                <li><a href="https://developer.mozilla.org/zh-CN/docs/Web/API/Fetch_API">MDN Fetch API</a></li>
                <li><a href="https://javascript.info/fetch">JavaScript.info Fetch</a></li>
                <li><a href="https://www.w3schools.com/js/js_ajax_intro.asp">W3Schools AJAX 介绍</a></li>
            </ul>
        </section>
    </main>

    <footer>
        <p>&copy; 2024 网页开发学习</p>
    </footer>
</body>
</html>
